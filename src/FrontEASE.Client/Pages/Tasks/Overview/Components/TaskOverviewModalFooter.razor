@inject IResourceHandler resourceHandler
@inject IMapper mapper

<ModalFooter Class="bg-custom-secondary border-custom-light">
    <Container Fluid Padding="Padding.Is0">
        <Row Margin="Margin.Is0">
            <Column ColumnSize="ColumnSize.Is3.OnFullHD.Is4.OnWidescreen.Is5.OnMobile">
                <Button Clicked="@HideModal" Color="Color.Danger" Class="btn button btn-sized full-width" TextWeight="TextWeight.Bold">
                    @(resourceHandler.GetResource($"{UIConstants.Base}.{UIConstants.Generic}.{UIActionConstants.Close}"))
                </Button>
            </Column>
        </Row>
    </Container>
</ModalFooter>

@code {
    [Parameter]
    public TaskModalContext TaskModalContext { get; set; } = null!;

    public async Task HandleKeyDown(KeyboardEventArgs e)
    {
        switch (ShortcutKeyDictionary.GetEnumForm(e.Key))
        {
            case ShortcutKeys.ENTER:
            case ShortcutKeys.ESCAPE:
                await HideModal();
                break;
            default:
                break;
        }
    }

    private async Task HideModal()
    {
        var cleanModel = new TaskDto();
        mapper.Map(cleanModel, TaskModalContext.Task);

        await TaskModalContext.Modal.Hide();
    }
}