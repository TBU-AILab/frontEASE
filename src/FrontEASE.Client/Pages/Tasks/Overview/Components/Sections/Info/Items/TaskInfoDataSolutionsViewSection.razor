@if (TaskModalContext.Task.Solutions.Count > 0)
{
    <Row>
        <Container Fluid>
            <TaskSolutionsViewSectionHeader TaskModalContext="TaskModalContext" />
        </Container>

        <Divider Class="divider-section bg-custom-light" Shadow="Shadow.Small" />

        <Column ColumnSize="ColumnSize.Is12" Padding="Padding.Is1.FromTop">
            <Container Fluid>
                <Row>
                    <Virtualize Items="GetOrderedSolutions()" Context="solution">
                        <ItemContent>
                            <TaskSolutionItemView TaskModalContext="TaskModalContext" Solution="solution" IsSelectable="true" SolutionDownloadsOngoing="SolutionDownloadsOngoing" />
                        </ItemContent>
                    </Virtualize>
                </Row>
            </Container>
        </Column>
    </Row>
}

@code {
    [Parameter]
    public TaskModalContext TaskModalContext { get; set; } = null!;

    private IList<Guid> SolutionDownloadsOngoing = [];

    private IList<TaskSolutionDto> GetOrderedSolutions()
    {
        var messageIDs = TaskModalContext.Task.Messages.OrderBy(x => x.DateCreated).Select(x => x.ID).ToList();
        return TaskModalContext.Task.Solutions.OrderBy(s => messageIDs.IndexOf(s.TaskMessageID)).ToList();
    }
}