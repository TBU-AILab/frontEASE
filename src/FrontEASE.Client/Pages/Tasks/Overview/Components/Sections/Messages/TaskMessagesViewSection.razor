@inject IResourceHandler resourceHandler

<Row>

    <Container Fluid>
        <FormSectionHeader DisplayText="@(resourceHandler.GetResource(AttributeExtensions.GetCollectionResourceValue<TaskMessageDto>()))" />
    </Container>

    <Divider Class="divider-section bg-custom-light" Shadow="Shadow.Small" />

    <Column ColumnSize="ColumnSize.Is12" Padding="Padding.Is3.FromTop">
        <Row>
            <Virtualize Items="TaskModalContext.Task.Messages.OrderBy(x => x.DateCreated).ToList()" Context="message">
                <ItemContent>
                    <Column ColumnSize="ColumnSize.IsFull" Margin="Margin.Is3.FromBottom">
                        @switch (message.Role)
                        {
                            case MessageRole.SYSTEM:
                                <SystemMessageView Message="message" />
                                break;
                            case MessageRole.USER:
                                <UserMessageView Message="message" IsFullWidth="false" />
                                break;
                            case MessageRole.AI:
                                <AssistantMessageView TaskModalContext="TaskModalContext" Message="message" IsThumbnail="false" IsSelectable="true" IsFullWidth="false" />
                                break;
                        }
                    </Column>
                </ItemContent>
                <EmptyContent>
                    <Column ColumnSize="ColumnSize.IsFull" TextAlignment="TextAlignment.Center" Margin="Margin.Is3.FromTop.Is3.FromBottom">
                        <Heading Size="HeadingSize.Is4" TextWeight="TextWeight.Bold" Class="text-custom-primary">
                            @(resourceHandler.GetResource($"{UIConstants.Data}.{UIConstants.Error}.{HttpStatusCode.NotFound}.{nameof(TaskMessageDto)}.{UIElementConstants.Collection}"))
                        </Heading>
                    </Column>
                </EmptyContent>
            </Virtualize>
        </Row>
    </Column>
</Row>

@code {
    [Parameter]
    public TaskModalContext TaskModalContext { get; set; } = null!;
}