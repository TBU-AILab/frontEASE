@inject IResourceHandler resourceHandler

<Row Margin="Margin.Is2.FromTop">
    <Container Fluid>
        <FormSectionHeader DisplayText="@TaskModuleContext.ModuleName" />
    </Container>

    <Divider Class="divider-section bg-custom-light" Shadow="Shadow.Small" />

    <Column ColumnSize="ColumnSize.IsFull" Padding="Padding.Is3.FromTop">
        <Fields>

            <Column ColumnSize="@(string.IsNullOrWhiteSpace(TaskModuleContext.ModuleData?.Description) ? ColumnSize.IsFull : ColumnSize.Is10.OnWidescreen)" Margin="Margin.Is2.FromTop.Is2.FromBottom">
                <Text>
                    @($"{resourceHandler.GetResource(AttributeExtensions.GetResourceFieldValue<TaskModuleDto>(nameof(TaskModuleDto.ShortName), PropertyDisplayResourceType.FIELD))}: ")
                </Text>
                <Span TextWeight="TextWeight.Bold" Class="fst-italic">
                    @($" {TaskModuleContext.Module?.LongName ?? TaskModuleContext.Module?.ShortName}")
                </Span>
            </Column>

            @if (!string.IsNullOrWhiteSpace(TaskModuleContext.ModuleData?.Description))
            {
                <Field ColumnSize="ColumnSize.Is2.OnWidescreen" TextAlignment="TextAlignment.End" Class="align-self-center" Padding="Padding.Is0.FromEnd.Is0.FromStart" Margin="Margin.Is2.FromTop">
                    <Div>
                        <Tooltip Multiline="true" Text="@(TaskModuleContext.ModuleData?.Description)" Display="Display.InlineBlock" Padding="Padding.Is1.FromEnd">
                            <Icon Class="action-icon-sm action-icon-info" Name="IconName.InfoCircle" IconSize="IconSize.Default" IconStyle="IconStyle.Solid" />
                        </Tooltip>
                    </Div>
                </Field>
            }

        </Fields>

        <Column ColumnSize="ColumnSize.IsFull">
            <Container Fluid>
                @if (!string.IsNullOrWhiteSpace(TaskModuleContext.Module.ShortName))
                {
                    <TaskModuleParamsViewSection AvailableParams="@TaskModuleContext.ModuleData?.Parameters"/>
                }
            </Container>
        </Column>
    </Column>
</Row>

@code {
    [Parameter]
    public TaskModalContext TaskModalContext { get; set; } = null!;

    [Parameter]
    public TaskModuleContext TaskModuleContext { get; set; } = null!;
}
